<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>Consulting Simulator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Animate.css -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
  <!-- FontAwesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"/>
  <style>
    body {
      background: linear-gradient(135deg, #f8fafc 0%, #e5e7eb 100%);
      min-height: 100vh;
      font-family: 'Segoe UI', 'Apple SD Gothic Neo', 'Malgun Gothic', Arial, sans-serif;
      color: #1f2937;
    }
    .hero {
      background: linear-gradient(135deg, #111827 0%, #374151 100%);
      color: #ffffff;
      border-radius: 1.5rem;
      box-shadow: 0 8px 32px rgba(0,0,0,0.1);
      margin-bottom: 2.5rem;
      padding: 3rem 2.5rem;
      position: relative;
      overflow: hidden;
    }
    .hero::after {
      content: '';
      position: absolute;
      right: -100px; top: -100px;
      width: 300px; height: 300px;
      background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
      z-index: 0;
      animation: float 8s ease-in-out infinite alternate;
    }
    @keyframes float {
      0% { transform: translateY(0) rotate(0deg);}
      100% { transform: translateY(20px) rotate(10deg);}
    }
    .hero h1 {
      font-size: 3rem;
      font-weight: 800;
      margin-bottom: 1rem;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .hero .subtitle {
      font-size: 1.25rem;
      font-weight: 600;
      margin-bottom: 1rem;
      color: #d1d5db;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .hero .description {
      font-size: 1.1rem;
      font-weight: 400;
      color: #e5e7eb;
      line-height: 1.6;
    }
    .section-box {
      background: #ffffff;
      border: 1px solid #e5e7eb;
      border-radius: 1.5rem;
      box-shadow: 0 4px 16px rgba(0,0,0,0.05);
      padding: 2.5rem 2rem;
      margin-bottom: 2.5rem;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    .section-box:hover {
      box-shadow: 0 8px 32px rgba(0,0,0,0.1);
      transform: translateY(-2px);
      border-color: #d1d5db;
    }
    .section-title {
      font-size: 1.5rem;
      font-weight: 800;
      margin-bottom: 1.5rem;
      color: #111827;
      letter-spacing: -0.025em;
      display: flex;
      align-items: center;
      gap: 0.75rem;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .section-title i {
      color: #6b7280;
      font-size: 1.25rem;
    }
    .primary-text {
      font-size: 1.125rem;
      font-weight: 600;
      color: #111827;
      margin-bottom: 0.5rem;
      line-height: 1.4;
    }
    .secondary-text {
      font-size: 1rem;
      font-weight: 400;
      color: #6b7280;
      line-height: 1.5;
    }
    .tertiary-text {
      font-size: 0.875rem;
      font-weight: 400;
      color: #9ca3af;
      line-height: 1.4;
    }
    .kpi-card {
      border-radius: 1.25rem;
      box-shadow: 0 4px 16px rgba(0,0,0,0.05);
      transition: all 0.3s ease;
      background: linear-gradient(135deg, #ffffff 0%, #f9fafb 100%);
      min-height: 160px;
      position: relative;
      overflow: hidden;
      cursor: pointer;
      animation: fadeInUp 1s;
      border: 1px solid #e5e7eb;
    }
    .kpi-card:hover {
      transform: translateY(-4px) scale(1.02);
      box-shadow: 0 12px 40px rgba(0,0,0,0.15);
      background: linear-gradient(135deg, #f9fafb 0%, #ffffff 100%);
      border-color: #d1d5db;
    }
    .kpi-label {
      font-size: 1rem;
      color: #6b7280;
      font-weight: 600;
      letter-spacing: -0.025em;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .kpi-value {
      font-size: 2.25rem;
      font-weight: 900;
      color: #111827;
      margin-top: 0.5rem;
      transition: color 0.3s;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .kpi-card:hover .kpi-value {
      color: #374151;
    }
    .kpi-description {
      font-size: 0.75rem;
      color: #9ca3af;
      margin-top: 0.5rem;
      line-height: 1.3;
    }
    .nav-tabs {
      border-bottom: 2px solid #e5e7eb;
      margin-bottom: 1.5rem;
      flex-wrap: wrap;
    }
    .nav-tabs .nav-link {
      border: none;
      color: #6b7280;
      font-weight: 500;
      font-size: 0.875rem;
      padding: 0.75rem 1rem;
      margin-bottom: -2px;
      white-space: nowrap;
      transition: all 0.2s;
    }
    .nav-tabs .nav-link.active {
      background: transparent;
      border-bottom: 2px solid #111827;
      color: #111827;
      font-weight: 700;
    }
    .nav-tabs .nav-link:hover {
      color: #374151;
      border-color: transparent;
    }
    .dashboard-chart {
      background: #ffffff;
      border: 1px solid #e5e7eb;
      border-radius: 1.25rem;
      padding: 1.5rem;
      box-shadow: 0 2px 8px rgba(0,0,0,0.04);
      margin-bottom: 1.5rem;
      min-height: 300px;
      animation: fadeIn 1.2s;
    }
    .chart-description {
      font-size: 0.875rem;
      color: #6b7280;
      margin-top: 1rem;
      padding-top: 1rem;
      border-top: 1px solid #f3f4f6;
    }
    .insight-list li {
      margin-bottom: 1rem;
      font-size: 1rem;
      position: relative;
      padding-left: 2rem;
      animation: fadeInLeft 0.8s;
      color: #374151;
      line-height: 1.5;
    }
    .insight-list li::before {
      content: "●";
      position: absolute;
      left: 0.5rem;
      top: 0;
      color: #111827;
      font-size: 1.25rem;
    }
    .simulator-controls label {
      font-weight: 600;
      color: #111827;
      font-size: 1rem;
      margin-bottom: 0.5rem;
    }
    .simulator-controls .form-range {
      accent-color: #111827;
    }
    .simulator-controls .form-control {
      border: 2px solid #e5e7eb;
      border-radius: 0.75rem;
      font-weight: 500;
    }
    .simulator-controls .form-control:focus {
      border-color: #111827;
      box-shadow: 0 0 0 0.2rem rgba(17,24,39,0.1);
    }
    .badge {
      font-size: 0.875rem;
      font-weight: 600;
      padding: 0.5rem 1rem;
      border-radius: 0.75rem;
    }
    .bg-primary {
      background-color: #111827 !important;
    }
    .bg-success {
      background-color: #374151 !important;
    }
    .accordion-button {
      background-color: #f9fafb;
      border: 1px solid #e5e7eb;
      color: #111827;
      font-weight: 600;
    }
    .accordion-button:not(.collapsed) {
      color: #111827;
      background-color: #ffffff;
      border-color: #d1d5db;
    }
    .table {
      border: 1px solid #e5e7eb;
    }
    .table th {
      background-color: #f9fafb;
      border-color: #e5e7eb;
      color: #111827;
      font-weight: 600;
    }
    .table td {
      border-color: #f3f4f6;
      color: #374151;
    }
    .btn-outline-primary {
      border-color: #111827;
      color: #111827;
    }
    .btn-outline-primary:hover {
      background-color: #111827;
      border-color: #111827;
    }
    .footer {
      margin-top: 4rem;
      color: #6b7280;
      font-size: 0.875rem;
      text-align: center;
      padding: 2rem 0;
      border-top: 1px solid #e5e7eb;
    }
    .fade-in-delay-1 { animation-delay: 0.2s; }
    .fade-in-delay-2 { animation-delay: 0.4s; }
    .fade-in-delay-3 { animation-delay: 0.6s; }
    .fade-in-delay-4 { animation-delay: 0.8s; }
    
    /* Responsive adjustments */
    @media (max-width: 768px) {
      .hero h1 {
        font-size: 2rem;
      }
      .section-box { 
        padding: 1.5rem 1rem; 
      }
      .hero { 
        padding: 2rem 1.5rem; 
      }
      .dashboard-chart { 
        padding: 1rem; 
        min-height: 250px;
      }
      .nav-tabs .nav-link {
        font-size: 0.75rem;
        padding: 0.5rem 0.75rem;
      }
      .kpi-value {
        font-size: 1.75rem;
      }
    }
    
    /* Chart container improvements */
    .chart-container {
      position: relative;
      height: 250px;
      margin-bottom: 1rem;
    }
    
    .chart-title {
      font-size: 1.125rem;
      font-weight: 700;
      color: #111827;
      margin-bottom: 1rem;
      text-align: center;
    }
  </style>
</head>
<body>
  <div class="container py-4">
    <!-- Hero Section -->
    <div class="hero animate__animated animate__fadeInDown">
      <h1><i class="fa-solid fa-chart-line"></i> Consulting Simulator</h1>
      <div class="subtitle">데이터 기반 의사결정 • KPI 분석 • 시나리오 시뮬레이션</div>
      <div class="description">
        <strong>비즈니스 데이터를 업로드하고, 실시간 대시보드와 자동 인사이트를 경험하세요.</strong><br>
        컨설팅 시뮬레이터는 다양한 경영 데이터를 시각화하고, 시나리오별 결과를 예측하여 실제 컨설팅 프로젝트처럼 전략적 의사결정을 지원합니다.
      </div>
    </div>

    <!-- 1. 데이터 파일 업로드 -->
    <div class="section-box animate__animated animate__fadeInUp">
      <div class="section-title"><i class="fa-solid fa-upload"></i> 데이터 파일 업로드</div>
      <div class="primary-text">분석하고자 하는 비즈니스 데이터를 업로드하세요.</div>
      <div class="secondary-text mb-3">CSV 파일만 지원합니다. (Excel은 별도 지원 예정)</div>
      
      <form>
        <div class="mb-3">
          <label for="fileInput" class="form-label primary-text">CSV 파일 업로드</label>
          <div class="tertiary-text mb-2">예: Revenue, Cost, Employees, Customers, Inventory 등 컬럼 포함</div>
          <input class="form-control" type="file" id="fileInput" accept=".csv">
        </div>
        
        <div class="mb-3">
          <a href="#" class="btn btn-outline-primary btn-sm"><i class="fa-solid fa-download"></i> 샘플 데이터 다운로드</a>
        </div>
        
        <div class="secondary-text">
          <strong>활용 팁:</strong> 파일 내 날짜, 제품, 지역, 마케팅비, 고객 등 다양한 컬럼을 추가하면 더 풍부한 분석이 가능합니다.
        </div>
      </form>
    </div>

    <!-- 2. 실시간 KPI 대시보드 -->
    <div class="section-box animate__animated animate__fadeInUp">
      <div class="section-title"><i class="fa-solid fa-gauge-high"></i> 실시간 KPI 대시보드</div>
      <div class="primary-text">주요 경영 지표를 한눈에 확인하세요.</div>
      <div class="secondary-text mb-4">업로드한 데이터 기반으로 매출, 비용, ROI, 이익률, 직원 생산성 등 핵심 KPI가 자동 계산됩니다.</div>
      
      <div class="row g-4 mb-4">
        <div class="col-6 col-md-3">
          <div class="kpi-card text-center p-3 animate__animated animate__fadeInUp fade-in-delay-1">
            <div class="kpi-label"><i class="fa-solid fa-sack-dollar"></i> 총 매출</div>
            <div class="kpi-value" id="kpi-revenue">-</div>
            <div class="kpi-description">전체 기간 총 매출액</div>
          </div>
        </div>
        <div class="col-6 col-md-3">
          <div class="kpi-card text-center p-3 animate__animated animate__fadeInUp fade-in-delay-2">
            <div class="kpi-label"><i class="fa-solid fa-percent"></i> ROI</div>
            <div class="kpi-value" id="kpi-roi">-</div>
            <div class="kpi-description">투자 대비 수익률</div>
          </div>
        </div>
        <div class="col-6 col-md-3">
          <div class="kpi-card text-center p-3 animate__animated animate__fadeInUp fade-in-delay-3">
            <div class="kpi-label"><i class="fa-solid fa-user-group"></i> 직원당 매출</div>
            <div class="kpi-value" id="kpi-rev-emp">-</div>
            <div class="kpi-description">직원 1인 평균 매출</div>
          </div>
        </div>
        <div class="col-6 col-md-3">
          <div class="kpi-card text-center p-3 animate__animated animate__fadeInUp fade-in-delay-4">
            <div class="kpi-label"><i class="fa-solid fa-chart-pie"></i> 이익률</div>
            <div class="kpi-value" id="kpi-margin">-</div>
            <div class="kpi-description">매출 대비 이익 비율</div>
          </div>
        </div>
      </div>

      <div class="primary-text mb-3"><i class="fa-solid fa-chart-bar"></i> 데이터 시각화 대시보드</div>
      <div class="secondary-text mb-3">다양한 관점에서 데이터를 분석하고 시각화 결과를 확인하세요.</div>
      
      <ul class="nav nav-tabs" id="dashboardTabs" role="tablist">
        <li class="nav-item" role="presentation">
          <button class="nav-link active" id="tab1-tab" data-bs-toggle="tab" data-bs-target="#tab1" type="button" role="tab">매출 vs 비용</button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="tab2-tab" data-bs-toggle="tab" data-bs-target="#tab2" type="button" role="tab">월별 매출 추이</button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="tab3-tab" data-bs-toggle="tab" data-bs-target="#tab3" type="button" role="tab">고객별 분포</button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="tab4-tab" data-bs-toggle="tab" data-bs-target="#tab4" type="button" role="tab">직원 생산성</button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="tab5-tab" data-bs-toggle="tab" data-bs-target="#tab5" type="button" role="tab">재고 분석</button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="tab6-tab" data-bs-toggle="tab" data-bs-target="#tab6" type="button" role="tab">비용 구조</button>
        </li>
      </ul>
      
      <div class="tab-content" id="dashboardTabsContent">
        <div class="tab-pane fade show active" id="tab1" role="tabpanel">
          <div class="dashboard-chart">
            <div class="chart-title">매출 vs 비용 비교 분석</div>
            <div class="chart-container">
              <canvas id="revenueCostChart"></canvas>
            </div>
            <div class="chart-description">
              매출과 비용의 상대적 규모를 비교하여 수익성 구조를 파악할 수 있습니다. 막대그래프를 통해 각 항목별 규모를 직관적으로 비교 가능합니다.
            </div>
          </div>
        </div>
        <div class="tab-pane fade" id="tab2" role="tabpanel">
          <div class="dashboard-chart">
            <div class="chart-title">월별 매출 추이 분석</div>
            <div class="chart-container">
              <canvas id="monthlyRevenueChart"></canvas>
            </div>
            <div class="chart-description">
              월별 매출 추이를 통해 계절성, 성장 패턴, 이상치 등을 확인하세요. 선형 차트로 트렌드를 명확히 파악할 수 있습니다.
            </div>
          </div>
        </div>
        <div class="tab-pane fade" id="tab3" role="tabpanel">
          <div class="dashboard-chart">
            <div class="chart-title">고객별 매출 분포</div>
            <div class="chart-container">
              <canvas id="customerRevenueChart"></canvas>
            </div>
            <div class="chart-description">
              고객별 매출 분포를 통해 핵심 고객군을 파악할 수 있습니다. 파이차트로 각 고객의 매출 기여도를 시각화합니다.
            </div>
          </div>
        </div>
        <div class="tab-pane fade" id="tab4" role="tabpanel">
          <div class="dashboard-chart">
            <div class="chart-title">직원 생산성 분석</div>
            <div class="chart-container">
              <canvas id="employeeProductivityChart"></canvas>
            </div>
            <div class="chart-description">
              직원 1인당 매출로 인적 자원의 효율성을 진단하세요. 생산성이 높은 부서나 팀을 식별할 수 있습니다.
            </div>
          </div>
        </div>
        <div class="tab-pane fade" id="tab5" role="tabpanel">
          <div class="dashboard-chart">
            <div class="chart-title">재고 회전율 분석</div>
            <div class="chart-container">
              <canvas id="inventoryTurnoverChart"></canvas>
            </div>
            <div class="chart-description">
              재고 회전율이 높을수록 재고 관리가 효율적임을 의미합니다. 선형 차트로 회전율 변화를 추적합니다.
            </div>
          </div>
        </div>
        <div class="tab-pane fade" id="tab6" role="tabpanel">
          <div class="dashboard-chart">
            <div class="chart-title">비용 구조 분석</div>
            <div class="chart-container">
              <canvas id="costStructureChart"></canvas>
            </div>
            <div class="chart-description">
              비용 구조를 시각화하여 고정비/변동비 비중을 파악하세요. 도넛 차트로 비용과 이익의 비율을 명확히 표시합니다.
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 3. 시나리오 시뮬레이션 -->
    <div class="section-box animate__animated animate__fadeInUp">
      <div class="section-title"><i class="fa-solid fa-flask-vial"></i> 시나리오 시뮬레이션</div>
      <div class="primary-text">경영 전략을 가상으로 적용하고 주요 지표 변화를 실시간 확인하세요.</div>
      <div class="secondary-text mb-4">마케팅 예산, 인원, 가격, 제품 수, 신규 고객 등 다양한 변수를 조정할 수 있습니다.</div>
      
      <div class="row">
        <div class="col-md-5 simulator-controls">
          <div class="mb-4">
            <label for="marketingRange" class="form-label">마케팅 예산 증가율 (%)</label>
            <input type="range" class="form-range mb-2" min="0" max="100" step="5" id="marketingRange" value="0" oninput="document.getElementById('marketingValue').innerText=this.value">
            <span id="marketingValue" class="badge bg-primary">0</span> %
          </div>
          
          <div class="mb-4">
            <label for="employeeInput" class="form-label">추가 인원 수</label>
            <input type="number" class="form-control" id="employeeInput" min="0" max="20" value="0" style="max-width: 120px;">
          </div>
          
          <div class="mb-4">
            <label for="priceRange" class="form-label">제품 가격 조정 (%)</label>
            <input type="range" class="form-range mb-2" min="-20" max="20" step="2" id="priceRange" value="0" oninput="document.getElementById('priceValue').innerText=this.value">
            <span id="priceValue" class="badge bg-success">0</span> %
          </div>
          
          <div class="mb-4">
            <label for="newCustomerInput" class="form-label">신규 고객 유치 수</label>
            <input type="number" class="form-control" id="newCustomerInput" min="0" max="100" value="0" style="max-width: 120px;">
          </div>
          
          <div class="tertiary-text">
            <strong>활용 팁:</strong> 여러 변수를 조합하여 다양한 시나리오를 실험해보세요.<br>
            예) 마케팅 예산 20% 증가 + 신규 고객 30명 유치 + 가격 5% 인상
          </div>
        </div>
        
        <div class="col-md-7">
          <div class="row g-3 mb-4">
            <div class="col-6 col-lg-4">
              <div class="kpi-card text-center p-3">
                <div class="kpi-label">시뮬레이션 비용</div>
                <div class="kpi-value" id="sim-cost" style="font-size: 1.75rem;">-</div>
                <div class="kpi-description">변수 조정 후 예상 비용</div>
              </div>
            </div>
            <div class="col-6 col-lg-4">
              <div class="kpi-card text-center p-3">
                <div class="kpi-label">시뮬레이션 ROI</div>
                <div class="kpi-value" id="sim-roi" style="font-size: 1.75rem;">-</div>
                <div class="kpi-description">변수 조정 후 예상 ROI</div>
              </div>
            </div>
            <div class="col-12 col-lg-4">
              <div class="kpi-card text-center p-3">
                <div class="kpi-label">ROI 변화</div>
                <div class="kpi-value" id="sim-roi-diff" style="font-size: 1.75rem;">-</div>
                <div class="kpi-description">현재 대비 ROI 증감</div>
              </div>
            </div>
          </div>
          
          <div class="dashboard-chart">
            <div class="chart-title">시나리오별 ROI 비교</div>
            <div class="chart-container">
              <canvas id="roiScenarioChart"></canvas>
            </div>
            <div class="chart-description">
              시나리오별 ROI 변화를 시각적으로 비교할 수 있습니다. 현재 상황과 시뮬레이션 결과를 막대그래프로 직관적 비교 가능합니다.
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 4. 자동 컨설팅 인사이트 & 예측 -->
    <div class="section-box animate__animated animate__fadeInUp">
      <div class="section-title"><i class="fa-solid fa-lightbulb"></i> 자동 컨설팅 인사이트 & 예측</div>
      <div class="primary-text">AI 기반 주요 경영 인사이트와 예측 결과를 자동으로 제공합니다.</div>
      <div class="secondary-text mb-4">데이터 업로드 및 시나리오 적용 시 위험 신호, 개선 제안, 성장 기회 등 다양한 인사이트가 자동 생성됩니다.</div>
      
      <div class="row">
        <div class="col-md-6">
          <div class="primary-text mb-3">핵심 인사이트</div>
          <ul class="insight-list" id="insightList">
            <li>데이터를 업로드하면 자동 인사이트가 표시됩니다.</li>
          </ul>
        </div>
        <div class="col-md-6">
          <div class="dashboard-chart">
            <div class="chart-title">매출 & ROI 예측</div>
            <div class="chart-container">
              <canvas id="forecastChart"></canvas>
            </div>
            <div class="chart-description">
              향후 매출 및 ROI 예측 결과를 확인할 수 있습니다. 이중축 차트로 매출과 ROI의 미래 전망을 동시에 표시합니다.
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 5. 데이터 테이블 (아코디언) -->
    <div class="accordion mb-4" id="dataAccordion">
      <div class="accordion-item">
        <h2 class="accordion-header" id="headingData">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseData" aria-expanded="false" aria-controls="collapseData">
            <i class="fa-solid fa-table me-2"></i> 데이터 테이블 보기
          </button>
        </h2>
        <div id="collapseData" class="accordion-collapse collapse" aria-labelledby="headingData" data-bs-parent="#dataAccordion">
          <div class="accordion-body">
            <div class="primary-text">업로드한 원본 데이터를 직접 확인하세요.</div>
            <div class="secondary-text mb-3">컬럼별 정렬, 키워드 검색 등 다양한 기능이 추가될 예정입니다.</div>
            
            <div class="table-responsive">
              <table class="table table-bordered align-middle" id="dataTable">
                <thead>
                  <tr>
                    <th>Revenue</th>
                    <th>Cost</th>
                    <th>Employees</th>
                    <th>Customers</th>
                    <th>Inventory</th>
                  </tr>
                </thead>
                <tbody>
                  <tr><td colspan="5" class="text-center secondary-text">데이터를 업로드하세요.</td></tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 6. 분석 가이드 & 활용 예시 -->
    <div class="section-box animate__animated animate__fadeInUp">
      <div class="section-title"><i class="fa-solid fa-book-open"></i> 분석 가이드 & 활용 예시</div>
      <div class="primary-text mb-3">컨설팅 시뮬레이터를 100% 활용하는 방법!</div>
      
      <div class="row">
        <div class="col-md-6">
          <div class="secondary-text mb-2"><strong>5단계 활용 프로세스</strong></div>
          <ul class="insight-list">
            <li><strong>1단계:</strong> CSV 데이터 업로드 (샘플 데이터로도 체험 가능)</li>
            <li><strong>2단계:</strong> KPI 대시보드에서 주요 지표와 트렌드 확인</li>
            <li><strong>3단계:</strong> 시나리오 시뮬레이션으로 다양한 전략 실험</li>
            <li><strong>4단계:</strong> 자동 인사이트와 예측 결과로 전략적 의사결정</li>
            <li><strong>5단계:</strong> 원본 데이터 테이블에서 세부 내역 검토</li>
          </ul>
        </div>
        <div class="col-md-6">
          <div class="secondary-text mb-2"><strong>주요 활용 사례</strong></div>
          <ul class="insight-list">
            <li>신규 제품 출시 시 예상 매출/ROI 시뮬레이션</li>
            <li>마케팅 예산 조정에 따른 비용 구조 및 성장률 변화 분석</li>
            <li>고객 세그먼트별 매출/이익률 분석을 통한 타겟 마케팅 전략 수립</li>
            <li>지역별 매출 데이터를 활용한 시장 확장 전략 도출</li>
          </ul>
        </div>
      </div>
      
      <div class="tertiary-text mt-3">
        <strong>문의/피드백:</strong> 추가 기능 요청 및 문의는 
        <a href="mailto:consulting@simulator.com" class="text-decoration-none" style="color: #111827;">consulting@simulator.com</a> 으로 연락주세요.
      </div>
    </div>

    <!-- Footer -->
    <div class="footer">
      &copy; 2024 Consulting Simulator · All rights reserved.<br>
      <span class="tertiary-text">본 서비스는 실제 컨설팅 프로젝트에서 활용되는 분석 프레임워크를 기반으로 개발되었습니다.</span>
    </div>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- PapaParse for CSV parsing -->
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
  <script>
    // 차트 설정 개선
    Chart.defaults.font.family = "'Segoe UI', 'Apple SD Gothic Neo', 'Malgun Gothic', Arial, sans-serif";
    Chart.defaults.color = '#374151';
    Chart.defaults.borderColor = '#e5e7eb';

    // --- Chart.js chart instances ---
    let revenueCostChart, roiScenarioChart, forecastChart;
    let monthlyRevenueChart, customerRevenueChart, employeeProductivityChart, inventoryTurnoverChart;
    let costStructureChart;

    // --- Helper: Format number with commas ---
    function formatNumber(num) {
      if (isNaN(num)) return '-';
      return num.toLocaleString('ko-KR');
    }
    function formatPercent(num) {
      if (isNaN(num)) return '-';
      return (num*100).toFixed(1) + '%';
    }

    // --- File Upload Handler ---
    document.getElementById('fileInput').addEventListener('change', function(e) {
      const file = e.target.files[0];
      if (!file) return;
      const ext = file.name.split('.').pop().toLowerCase();
      if (ext === 'csv') {
        Papa.parse(file, {
          header: true,
          skipEmptyLines: true,
          complete: function(results) {
            handleData(results.data);
          }
        });
      } else {
        alert('CSV 파일만 지원합니다. (Excel은 별도 지원 예정)');
      }
    });

    // --- Main Data Handler ---
    let globalData = [];
    function handleData(data) {
      const cols = ['Revenue','Cost','Employees','Customers','Inventory','Product','Region','Marketing','Date'];
      data = data.map(row => {
        let newRow = {};
        cols.forEach(col => {
          newRow[col] = Number(row[col]) || row[col] || 0;
        });
        return newRow;
      });
      globalData = data;
      updateTable(data);
      updateKPIs(data);
      updateCharts(data);
      updateInsights(data);
    }

    // --- Update Data Table ---
    function updateTable(data) {
      const tbody = document.querySelector('#dataTable tbody');
      tbody.innerHTML = '';
      if (!data.length) {
        tbody.innerHTML = '<tr><td colspan="5" class="text-center secondary-text">데이터를 업로드하세요.</td></tr>';
        return;
      }
      data.forEach(row => {
        const tr = document.createElement('tr');
        tr.innerHTML = `<td>${formatNumber(row.Revenue)}</td>
                        <td>${formatNumber(row.Cost)}</td>
                        <td>${formatNumber(row.Employees)}</td>
                        <td>${formatNumber(row.Customers)}</td>
                        <td>${formatNumber(row.Inventory)}</td>`;
        tbody.appendChild(tr);
      });
    }

    // --- Update KPI Cards ---
    function updateKPIs(data) {
      let revenue = data.reduce((a,b)=>a+Number(b.Revenue),0);
      let cost = data.reduce((a,b)=>a+Number(b.Cost),0);
      let employees = data.reduce((a,b)=>a+Number(b.Employees),0);
      let roi = cost ? (revenue-cost)/cost : 0;
      let revEmp = employees ? revenue/employees : 0;
      let margin = revenue ? (revenue-cost)/revenue : 0;

      document.getElementById('kpi-revenue').innerText = formatNumber(revenue) + '원';
      document.getElementById('kpi-roi').innerText = formatPercent(roi);
      document.getElementById('kpi-rev-emp').innerText = formatNumber(revEmp) + '원';
      document.getElementById('kpi-margin').innerText = formatPercent(margin);

      updateSimulation();
    }

    // --- Update Charts with improved styling ---
    function updateCharts(data) {
      const chartColors = {
        primary: '#111827',
        secondary: '#374151',
        accent: '#6b7280',
        light: '#e5e7eb'
      };

      // Revenue vs Cost Chart
      const labels = data.map((_,i)=>`데이터 ${i+1}`);
      const revenueArr = data.map(r=>Number(r.Revenue));
      const costArr = data.map(r=>Number(r.Cost));

      if (revenueCostChart) revenueCostChart.destroy();
      const ctx1 = document.getElementById('revenueCostChart').getContext('2d');
      revenueCostChart = new Chart(ctx1, {
        type: 'bar',
        data: {
          labels: labels,
          datasets: [
            { 
              label: '매출', 
              data: revenueArr, 
              backgroundColor: chartColors.primary,
              borderRadius: 4
            },
            { 
              label: '비용', 
              data: costArr, 
              backgroundColor: chartColors.secondary,
              borderRadius: 4
            }
          ]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: { 
            legend: { position: 'top', labels: { usePointStyle: true, padding: 20 } }
          },
          scales: {
            y: {
              beginAtZero: true,
              grid: { color: chartColors.light }
            },
            x: {
              grid: { display: false }
            }
          },
          animation: { duration: 800, easing: 'easeOutQuart' }
        }
      });

      // Monthly Revenue Chart
      if (monthlyRevenueChart) monthlyRevenueChart.destroy();
      const ctx2 = document.getElementById('monthlyRevenueChart').getContext('2d');
      let monthLabels = ['1월','2월','3월','4월','5월','6월'];
      let monthData = Array(monthLabels.length).fill(0);
      data.forEach((row,i)=>{
        monthData[i%monthLabels.length] += Number(row.Revenue);
      });
      monthlyRevenueChart = new Chart(ctx2, {
        type: 'line',
        data: {
          labels: monthLabels,
          datasets: [{
            label: '월별 매출',
            data: monthData,
            borderColor: chartColors.primary,
            backgroundColor: 'rgba(17,24,39,0.1)',
            tension: 0.4,
            borderWidth: 3,
            pointBackgroundColor: chartColors.primary,
            pointRadius: 6
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: { legend: { display: false } },
          scales: {
            y: {
              beginAtZero: true,
              grid: { color: chartColors.light }
            },
            x: {
              grid: { display: false }
            }
          }
        }
      });

      // Customer Revenue Chart
      if (customerRevenueChart) customerRevenueChart.destroy();
      const ctx3 = document.getElementById('customerRevenueChart').getContext('2d');
      let customerMap = {};
      data.forEach(row=>{
        let cust = row.Customers || '기타';
        customerMap[cust] = (customerMap[cust]||0) + Number(row.Revenue);
      });
      let custLabels = Object.keys(customerMap);
      let custData = Object.values(customerMap);
      customerRevenueChart = new Chart(ctx3, {
        type: 'doughnut',
        data: {
          labels: custLabels,
          datasets: [{
            data: custData,
            backgroundColor: [chartColors.primary, chartColors.secondary, chartColors.accent, '#9ca3af', '#d1d5db']
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: { position: 'bottom', labels: { padding: 20, usePointStyle: true } }
          }
        }
      });

      // Employee Productivity Chart
      if (employeeProductivityChart) employeeProductivityChart.destroy();
      const ctx4 = document.getElementById('employeeProductivityChart').getContext('2d');
      let empLabels = data.map((_,i)=>`팀 ${i+1}`);
      let empData = data.map(row=>row.Employees?Number(row.Revenue)/Number(row.Employees):0);
      employeeProductivityChart = new Chart(ctx4, {
        type: 'bar',
        data: {
          labels: empLabels,
          datasets: [{
            label: '직원 1인당 매출',
            data: empData,
            backgroundColor: chartColors.secondary,
            borderRadius: 6
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: { legend: { display: false } },
          scales: {
            y: {
              beginAtZero: true,
              grid: { color: chartColors.light }
            },
            x: {
              grid: { display: false }
            }
          }
        }
      });

      // Inventory Turnover Chart
      if (inventoryTurnoverChart) inventoryTurnoverChart.destroy();
      const ctx5 = document.getElementById('inventoryTurnoverChart').getContext('2d');
      let invLabels = data.map((_,i)=>`기간 ${i+1}`);
      let invData = data.map(row=>row.Inventory?Number(row.Revenue)/Number(row.Inventory):0);
      inventoryTurnoverChart = new Chart(ctx5, {
        type: 'line',
        data: {
          labels: invLabels,
          datasets: [{
            label: '재고 회전율',
            data: invData,
            borderColor: chartColors.accent,
            backgroundColor: 'rgba(107,114,128,0.1)',
            tension: 0.4,
            borderWidth: 3,
            pointBackgroundColor: chartColors.accent,
            pointRadius: 5
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: { legend: { display: false } },
          scales: {
            y: {
              beginAtZero: true,
              grid: { color: chartColors.light }
            },
            x: {
              grid: { display: false }
            }
          }
        }
      });

      // Cost Structure Chart
      if (costStructureChart) costStructureChart.destroy();
      const ctx6 = document.getElementById('costStructureChart').getContext('2d');
      let totalCost = data.reduce((a,b)=>a+Number(b.Cost),0);
      let totalRevenue = data.reduce((a,b)=>a+Number(b.Revenue),0);
      costStructureChart = new Chart(ctx6, {
        type: 'doughnut',
        data: {
          labels: ['비용', '이익'],
          datasets: [{
            data: [totalCost, totalRevenue-totalCost],
            backgroundColor: [chartColors.secondary, chartColors.primary],
            borderWidth: 0
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: { position: 'bottom', labels: { padding: 20, usePointStyle: true } }
          },
          cutout: '60%'
        }
      });
    }

    // --- Scenario Simulation ---
    document.getElementById('marketingRange').addEventListener('input', updateSimulation);
    document.getElementById('employeeInput').addEventListener('input', updateSimulation);
    document.getElementById('priceRange').addEventListener('input', updateSimulation);
    document.getElementById('newCustomerInput').addEventListener('input', updateSimulation);

    function updateSimulation() {
      if (!globalData.length) {
        document.getElementById('sim-cost').innerText = '-';
        document.getElementById('sim-roi').innerText = '-';
        document.getElementById('sim-roi-diff').innerText = '-';
        if (roiScenarioChart) roiScenarioChart.destroy();
        updateForecast([]);
        return;
      }
      let revenue = globalData.reduce((a,b)=>a+Number(b.Revenue),0);
      let cost = globalData.reduce((a,b)=>a+Number(b.Cost),0);
      let employees = globalData.reduce((a,b)=>a+Number(b.Employees),0);

      let marketingInc = Number(document.getElementById('marketingRange').value);
      let addEmp = Number(document.getElementById('employeeInput').value);
      let priceAdj = Number(document.getElementById('priceRange').value) / 100;
      let newCust = Number(document.getElementById('newCustomerInput').value);

      let simRevenue = revenue * (1 + marketingInc/100 + priceAdj) + newCust * 10000;
      let simCost = cost + cost*(marketingInc/100) + addEmp*5000;
      let roi = cost ? (revenue-cost)/cost : 0;
      let simRoi = simCost ? (simRevenue-simCost)/simCost : 0;
      let roiDiff = simRoi - roi;

      document.getElementById('sim-cost').innerText = formatNumber(simCost) + '원';
      document.getElementById('sim-roi').innerText = formatPercent(simRoi);
      document.getElementById('sim-roi-diff').innerText = (roiDiff>=0?'+':'') + formatPercent(roiDiff);

      // ROI Scenario Chart with improved styling
      if (roiScenarioChart) roiScenarioChart.destroy();
      const ctx2 = document.getElementById('roiScenarioChart').getContext('2d');
      roiScenarioChart = new Chart(ctx2, {
        type: 'bar',
        data: {
          labels: ['현재 ROI', '시뮬레이션 ROI'],
          datasets: [{
            data: [roi, simRoi],
            backgroundColor: ['#374151', '#111827'],
            borderRadius: 6
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          indexAxis: 'y',
          plugins: { legend: { display: false } },
          scales: {
            x: {
              min: Math.min(roi, simRoi) - 0.1,
              max: Math.max(roi, simRoi) + 0.1,
              ticks: { callback: v=>(v*100).toFixed(0)+'%' },
              grid: { color: '#e5e7eb' }
            },
            y: {
              grid: { display: false }
            }
          }
        }
      });

      updateForecast([revenue, simCost]);
      updateInsights(globalData, roi, simRoi, marketingInc, employees, revenue);
    }

    // --- Forecast Chart ---
    function updateForecast([revenue, simCost]) {
      if (!revenue || !simCost) {
        if (forecastChart) forecastChart.destroy();
        return;
      }
      let periods = 3;
      let revenueForecast = Array.from({length:periods}, (_,i)=>revenue*(1+0.05*(i+1)));
      let roiForecast = revenueForecast.map(rf=>(rf-simCost)/simCost);

      if (forecastChart) forecastChart.destroy();
      const ctx3 = document.getElementById('forecastChart').getContext('2d');
      forecastChart = new Chart(ctx3, {
        type: 'line',
        data: {
          labels: ['1분기 후','2분기 후','3분기 후'],
          datasets: [
            {
              label: '매출 예측',
              data: revenueForecast,
              borderColor: '#111827',
              backgroundColor: 'rgba(17,24,39,0.1)',
              yAxisID: 'y',
              tension: 0.4,
              borderWidth: 3,
              pointRadius: 6
            },
            {
              label: 'ROI 예측',
              data: roiForecast,
              borderColor: '#6b7280',
              backgroundColor: 'rgba(107,114,128,0.1)',
              yAxisID: 'y1',
              tension: 0.4,
              borderWidth: 3,
              pointRadius: 6
            }
          ]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: { position: 'top', labels: { usePointStyle: true, padding: 20 } }
          },
          scales: {
            y: {
              type: 'linear',
              position: 'left',
              title: { display: true, text: '매출 (원)' },
              grid: { color: '#e5e7eb' }
            },
            y1: {
              type: 'linear',
              position: 'right',
              title: { display: true, text: 'ROI (%)' },
              ticks: { callback: v=>(v*100).toFixed(0)+'%' },
              grid: { display: false }
            },
            x: {
              grid: { display: false }
            }
          }
        }
      });
    }

    // --- Automated Insights ---
    function updateInsights(data, roi, simRoi, marketingInc, employees, revenue) {
      const ul = document.getElementById('insightList');
      ul.innerHTML = '';
      if (!data.length) {
        ul.innerHTML = '<li>데이터를 업로드하면 자동 인사이트가 표시됩니다.</li>';
        return;
      }
      let revEmp = employees ? revenue/employees : 0;
      let margin = revenue ? (revenue-data.reduce((a,b)=>a+b.Cost,0))/revenue : 0;
      let insights = [];
      
      if (roi < 0.1) insights.push('ROI가 10% 미만입니다. 비용 최적화 또는 효율성 개선을 권장합니다.');
      if (revEmp < 50000) insights.push('직원 1인당 매출이 낮습니다. 업무 프로세스 개선 또는 교육을 고려하세요.');
      if (marketingInc > 20) insights.push('마케팅 예산이 과도하게 증가했습니다. 기대 매출 증가와의 정합성을 검토하세요.');
      if (margin < 0.15) insights.push('이익률이 15% 미만입니다. 가격 정책 또는 변동비 절감을 검토하세요.');
      if (simRoi > roi) insights.push('시뮬레이션 결과 ROI가 개선됩니다. 변경안의 실행 가능성을 검토하세요.');
      if (!insights.length) insights.push('모든 주요 지표가 양호합니다. 현재 전략을 유지하세요.');
      
      insights.forEach(txt=>{
        const li = document.createElement('li');
        li.innerText = txt;
        ul.appendChild(li);
      });
    }
  </script>
</body>
</html>